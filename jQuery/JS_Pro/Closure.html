<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>闭包的理解</title>
  </head>
  <body>
    <script type="text/javascript">
    // 闭包到底是什么？
    /*
      绝大多数人的理解是：  闭包是嵌套的内部函数
      其实：   闭包是包含被引用变量(函数)的对象
      则产生闭包的条件就有两个:
      * 函数嵌套
      * 内部函数引用了外部函数的数据(变量/函数)
    */

    function fn1 () {
      var a = 2
      function fn2() {
        console.log(a);
      }
    }
    fn1()

    //  闭包和变量提升的混合
    function fn2 () {
      var a = 2
      function fn3 () {
        a ++
        console.log(a)
      }
      return fn3
    }

    var fn_clo = fn2()
    fn_clo() //3
    fn_clo() //4

    // test
    function fn3 () {
      var a = 2
      function fn4 () {
        a++
        console.log(a)
      }
      return fn4
    }
    var f_test = fn3()
    f_test()
    fn3()()
    </script>
  </body>
</html>
